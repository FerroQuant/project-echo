<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>{% if page.title %}{{ page.title }} | {{ site.title }}{% else %}{{ site.title }} — {{ site.description }}{% endif %}</title>

  <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  <meta name="google-site-verification" content="xN1wApBvq0e598gluT_-HEHROUHYYBFaW71E8eLnygg">
  <meta name="theme-color" content="#073f6e">
  <meta name="format-detection" content="telephone=no">
  <link rel="canonical" href="{{ page.url | absolute_url }}">

  <!-- Preconnect hints -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://www.facebook.com">
  <link rel="dns-prefetch" href="https://www.google.com">

  <!-- Google Fonts — swap prevents FOIT (flash of invisible text) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;600;700&display=swap"
        rel="stylesheet">

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css?v=13' | relative_url }}">

  <!-- Preload hero image on homepage for faster LCP -->
  {% if page.url == '/' %}
  <link rel="preload" as="image" href="{{ '/assets/images/church/hero.jpg' | relative_url }}" fetchpriority="high">
  {% endif %}

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="{{ '/assets/images/favicon.svg?v=3' | relative_url }}">
  <link rel="icon" type="image/x-icon" href="{{ '/assets/images/favicon.ico?v=3' | relative_url }}" sizes="16x16 32x32 48x48">
  <link rel="apple-touch-icon" href="{{ '/assets/images/apple-touch-icon.png' | relative_url }}">
  <link rel="manifest" href="{{ '/manifest.json' | relative_url }}">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="{% if page.title %}{{ page.title }} | {{ site.title }}{% else %}{{ site.title }}{% endif %}">
  <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  <meta property="og:image" content="{% if page.image %}{{ page.image | absolute_url }}{% else %}{{ '/assets/images/church/hero.jpg' | absolute_url }}{% endif %}">
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:locale" content="en_GB">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }} | {{ site.title }}{% else %}{{ site.title }}{% endif %}">
  <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  <meta name="twitter:image" content="{% if page.image %}{{ page.image | absolute_url }}{% else %}{{ '/assets/images/church/hero.jpg' | absolute_url }}{% endif %}">

  <!-- Jekyll SEO tag -->
  {% seo %}

  <!-- Jekyll Feed meta -->
  {% feed_meta %}

  <!-- Structured data (JSON-LD) -->
  {% include schema-org.html %}
</head>
<body>
  <!-- SVG water ripple filter for logo animation -->
  <svg class="sr-only" aria-hidden="true">
    <defs>
      <filter id="water-filter" x="-3%" y="-3%" width="106%" height="106%">
        <feTurbulence type="fractalNoise" baseFrequency="0.015" numOctaves="2" seed="1">
          <animate attributeName="seed" from="1" to="80" dur="10s" repeatCount="indefinite"/>
        </feTurbulence>
        <feDisplacementMap in="SourceGraphic" scale="4" xChannelSelector="R" yChannelSelector="G"/>
      </filter>
    </defs>
  </svg>

  <!-- Page-wide floating bubbles (10 — kept lean for memory) -->
  <div class="page-bubbles" aria-hidden="true">
    <span class="page-bubble"></span>
    <span class="page-bubble"></span>
    <span class="page-bubble"></span>
    <span class="page-bubble"></span>
    <span class="page-bubble"></span>
    <span class="page-bubble"></span>
    <span class="page-bubble"></span>
    <span class="page-bubble"></span>
    <span class="page-bubble"></span>
    <span class="page-bubble"></span>
  </div>

  <!-- Dove animation — flies in, lands on buttons, drinks, flies off (homepage only) -->
  {% if page.url == '/' %}
  <div class="dove-animation" aria-hidden="true">
    <svg class="dove-svg" viewBox="0 0 120 90" xmlns="http://www.w3.org/2000/svg">
      <!-- Tail feathers (behind body) -->
      <path d="M33,44 Q16,36 8,44 Q18,43 30,47" fill="currentColor" opacity="0.8"/>
      <path d="M33,48 Q12,42 6,52 Q16,49 30,51" fill="currentColor" opacity="0.7"/>
      <path d="M35,42 Q20,32 14,38 Q22,40 32,44" fill="currentColor" opacity="0.75"/>
      <!-- Body — slightly egg-shaped -->
      <ellipse cx="56" cy="46" rx="22" ry="13" fill="currentColor" opacity="0.95"/>
      <!-- Wing (big, visible, on top of body) -->
      <path class="dove-wing" d="M44,44 Q18,6 4,18 Q22,30 40,44" fill="currentColor" opacity="0.9"/>
      <!-- Chest highlight -->
      <ellipse cx="64" cy="48" rx="8" ry="7" fill="currentColor" opacity="0.4"/>
      <!-- Neck -->
      <path d="M68,40 Q75,33 76,27" stroke="currentColor" stroke-width="9" fill="none" stroke-linecap="round" opacity="0.92"/>
      <!-- Head -->
      <circle cx="77" cy="25" r="10" fill="currentColor" opacity="0.95"/>
      <!-- Beak — slim, dove-like -->
      <path d="M87,24 L96,28 L87,30" fill="#d4922a"/>
      <!-- Eye -->
      <circle cx="81" cy="23" r="1.8" fill="#1a1a1a"/>
      <circle cx="81.5" cy="22.5" r="0.5" fill="white"/>
      <!-- Legs with feet -->
      <g class="dove-legs">
        <line x1="49" y1="57" x2="46" y2="76" stroke="#9a8070" stroke-width="2" stroke-linecap="round"/>
        <path d="M46,76 L41,80 M46,76 L46,82 M46,76 L51,80" stroke="#9a8070" stroke-width="1.3" fill="none" stroke-linecap="round"/>
        <line x1="63" y1="56" x2="66" y2="76" stroke="#9a8070" stroke-width="2" stroke-linecap="round"/>
        <path d="M66,76 L61,80 M66,76 L66,82 M66,76 L71,80" stroke="#9a8070" stroke-width="1.3" fill="none" stroke-linecap="round"/>
      </g>
    </svg>
  </div>
  {% endif %}

  <!-- Skip to main content (screen reader / keyboard nav) -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Site header -->
  {% include header.html %}

  <!-- Page content -->
  <main id="main-content" tabindex="-1">
    {% include breadcrumbs.html %}
    {{ content }}
  </main>

  <!-- Back to top button -->
  <button class="back-to-top" id="back-to-top" aria-label="Back to top" type="button">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false"><polyline points="18 15 12 9 6 15"/></svg>
  </button>

  <!-- Site footer -->
  {% include footer.html %}

  <!-- Copy protection -->
  <script src="{{ '/assets/js/protect.js' | relative_url }}" defer></script>

  <!-- Video facade — lazy-loads Facebook video iframes on click -->
  <script src="{{ '/assets/js/video-facade.js' | relative_url }}" defer></script>

  <!-- Mobile menu JavaScript -->
  <script src="{{ '/assets/js/mobile-menu.js' | relative_url }}" defer></script>

  <!-- Facebook Live auto-detection -->
  <script src="{{ '/assets/js/live-status.js' | relative_url }}" defer></script>
</body>
</html>
